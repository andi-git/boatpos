SET DB_CLOSE_DELAY -1;         
;              
CREATE USER IF NOT EXISTS BOATPOS SALT 'cc733ba458132ec2' HASH 'b8e4cefc8b15e1581ef1e18d4c5dd66d9cc267703ac20975ab7c5d664cbad765' ADMIN;       
CREATE SEQUENCE PUBLIC.HIBERNATE_SEQUENCE START WITH 29;       
CREATE CACHED TABLE PUBLIC.RENTAL_COMMITMENT(
    RENTAL_ID BIGINT NOT NULL,
    COMMITMENT_ID BIGINT NOT NULL
);              
ALTER TABLE PUBLIC.RENTAL_COMMITMENT ADD CONSTRAINT PUBLIC.CONSTRAINT_9 PRIMARY KEY(RENTAL_ID, COMMITMENT_ID); 
-- 5 +/- SELECT COUNT(*) FROM PUBLIC.RENTAL_COMMITMENT;        
INSERT INTO PUBLIC.RENTAL_COMMITMENT(RENTAL_ID, COMMITMENT_ID) VALUES
(3, 4),
(5, 4),
(7, 9),
(7, 4),
(10, 9); 
CREATE CACHED TABLE PUBLIC.BOAT(
    ID BIGINT NOT NULL CHECK (ID >= 0),
    VERSION INTEGER NOT NULL CHECK (VERSION >= 0),
    ENABLED BOOLEAN NOT NULL,
    KEYBINDING CHAR(255),
    PRIORITY INTEGER NOT NULL CHECK (PRIORITY >= 0),
    COUNT INTEGER NOT NULL CHECK ((COUNT <= 100)
    AND (COUNT >= 0)),
    NAME VARCHAR(50) NOT NULL,
    PICTUREURLLARGE VARCHAR(100) NOT NULL,
    PICTUREURLMEDIUM VARCHAR(100) NOT NULL,
    PICTUREURLSMALL VARCHAR(100) NOT NULL,
    PRICEFORTYFIVEMINUTES DECIMAL(7, 2) NOT NULL CHECK (PRICEFORTYFIVEMINUTES >= 0),
    PRICEONEHOUR DECIMAL(7, 2) NOT NULL CHECK (PRICEONEHOUR >= 0),
    PRICETHIRTYMINUTES DECIMAL(7, 2) NOT NULL CHECK (PRICETHIRTYMINUTES >= 0),
    SHORTNAME VARCHAR(3) NOT NULL
);  
ALTER TABLE PUBLIC.BOAT ADD CONSTRAINT PUBLIC.CONSTRAINT_1 PRIMARY KEY(ID);    
-- 6 +/- SELECT COUNT(*) FROM PUBLIC.BOAT;     
INSERT INTO PUBLIC.BOAT(ID, VERSION, ENABLED, KEYBINDING, PRIORITY, COUNT, NAME, PICTUREURLLARGE, PICTUREURLMEDIUM, PICTUREURLSMALL, PRICEFORTYFIVEMINUTES, PRICEONEHOUR, PRICETHIRTYMINUTES, SHORTNAME) VALUES
(1, 1, TRUE, 'a', 1, 22, 'E-Boot', 'http://www.eppel-boote.at/cms/images/stories/pics_eppel/boote/eboot_2.jpg', 'http://www.eppel-boote.at/cms/images/stories/pics_eppel/boote/eboot_2.jpg', 'http://www.eppel-boote.at/cms/images/stories/pics_eppel/boote/thumbs/eboot_2.jpg', 14.30, 16.80, 9.50, 'E'),
(6, 1, TRUE, 'b', 2, 6, 'Tretboot klein', 'http://www.eppel-boote.at/cms/images/stories/pics_eppel/boote/tretboot_2.jpg', 'http://www.eppel-boote.at/cms/images/stories/pics_eppel/boote/tretboot_2.jpg', 'http://www.eppel-boote.at/cms/images/stories/pics_eppel/boote/thumbs/tretboot_2.jpg', 11.30, 12.80, 7.50, 'T2'),
(11, 1, TRUE, 'c', 3, 9, STRINGDECODE('Tretboot gro\u00df'), 'http://www.eppel-boote.at/cms/images/stories/pics_eppel/boote/tretboot_4.jpg', 'http://www.eppel-boote.at/cms/images/stories/pics_eppel/boote/tretboot_4.jpg', 'http://www.eppel-boote.at/cms/images/stories/pics_eppel/boote/thumbs/tretboot_4.jpg', 11.30, 12.80, 7.50, 'T4'),
(17, 1, TRUE, 'd', 4, 3, 'Tretboot Rutsche', 'http://www.eppel-boote.at/cms/images/stories/pics_eppel/boote/thumbs/tretboot.jpg', 'http://www.eppel-boote.at/cms/images/stories/pics_eppel/boote/tretboot_rutsche.jpg', 'http://www.eppel-boote.at/cms/images/stories/pics_eppel/boote/thumbs/tretboot_rutsche.jpg', 11.70, 13.80, 7.80, 'TR'),
(18, 1, TRUE, 'e', 5, 5, 'Liegeboot', 'http://www.eppel-boote.at/cms/images/stories/pics_eppel/boote/ruderboot.jpg', 'http://www.eppel-boote.at/cms/images/stories/pics_eppel/boote/ruderboot.jpg', 'http://www.eppel-boote.at/cms/images/stories/pics_eppel/boote/thumbs/ruderboot.jpg', 9.80, 9.80, 9.80, 'L'),
(19, 1, FALSE, 'f', 6, 5, STRINGDECODE('P\u00f6nt'), 'http://www.eppel-boote.at/cms/images/stories/pics_eppel/boote/ruderboot.jpg', 'http://www.eppel-boote.at/cms/images/stories/pics_eppel/boote/ruderboot.jpg', 'http://www.eppel-boote.at/cms/images/stories/pics_eppel/boote/thumbs/ruderboot.jpg', 9.80, 9.80, 9.80, 'P');       
CREATE CACHED TABLE PUBLIC.BOAT_RENTAL(
    BOAT_ID BIGINT NOT NULL,
    RENTALS_ID BIGINT NOT NULL
);         
ALTER TABLE PUBLIC.BOAT_RENTAL ADD CONSTRAINT PUBLIC.CONSTRAINT_B PRIMARY KEY(BOAT_ID, RENTALS_ID);            
-- 8 +/- SELECT COUNT(*) FROM PUBLIC.BOAT_RENTAL;              
INSERT INTO PUBLIC.BOAT_RENTAL(BOAT_ID, RENTALS_ID) VALUES
(1, 2),
(1, 3),
(1, 12),
(1, 13),
(1, 14),
(1, 7),
(1, 15),
(1, 16);
CREATE CACHED TABLE PUBLIC.COMMITMENT(
    ID BIGINT NOT NULL CHECK (ID >= 0),
    VERSION INTEGER NOT NULL CHECK (VERSION >= 0),
    ENABLED BOOLEAN NOT NULL,
    KEYBINDING CHAR(255),
    PRIORITY INTEGER NOT NULL CHECK (PRIORITY >= 0),
    NAME VARCHAR(255) NOT NULL,
    PAPER BOOLEAN
);            
ALTER TABLE PUBLIC.COMMITMENT ADD CONSTRAINT PUBLIC.CONSTRAINT_5 PRIMARY KEY(ID);              
-- 6 +/- SELECT COUNT(*) FROM PUBLIC.COMMITMENT;               
INSERT INTO PUBLIC.COMMITMENT(ID, VERSION, ENABLED, KEYBINDING, PRIORITY, NAME, PAPER) VALUES
(4, 1, TRUE, 'A', 1, 'Ausweis', TRUE),
(9, 1, TRUE, 'B', 2, 'EUR 50,-', FALSE),
(24, 1, TRUE, 'C', 3, 'EUR 100,-', FALSE),
(25, 1, TRUE, 'D', 4, STRINGDECODE('Schl\u00fcssel'), TRUE),
(26, 1, TRUE, 'E', 5, 'Diverses', TRUE),
(27, 1, FALSE, 'F', 5, 'Kinderwagen', TRUE);    
CREATE CACHED TABLE PUBLIC.PROMOTION(
    PROMOTIONTYPE VARCHAR(1) NOT NULL,
    ID BIGINT NOT NULL CHECK (ID >= 0),
    VERSION INTEGER NOT NULL CHECK (VERSION >= 0),
    ENABLED BOOLEAN NOT NULL,
    KEYBINDING CHAR(255),
    PRIORITY INTEGER NOT NULL CHECK (PRIORITY >= 0),
    FORMULAPRICE VARCHAR(255) NOT NULL,
    NAME VARCHAR(255) NOT NULL,
    TIMECREDIT INTEGER CHECK (TIMECREDIT >= 0)
); 
ALTER TABLE PUBLIC.PROMOTION ADD CONSTRAINT PUBLIC.CONSTRAINT_7 PRIMARY KEY(ID);               
-- 5 +/- SELECT COUNT(*) FROM PUBLIC.PROMOTION;
INSERT INTO PUBLIC.PROMOTION(PROMOTIONTYPE, ID, VERSION, ENABLED, KEYBINDING, PRIORITY, FORMULAPRICE, NAME, TIMECREDIT) VALUES
('B', 8, 1, TRUE, 'k', 1, 'priceOneHour * 2', 'Fahr 3 zahl 2', 180),
('B', 20, 1, TRUE, 'l', 2, 'priceOneHour * 3', 'Fahr 5 zahl 3', 300),
('B', 21, 1, FALSE, 'm', 3, 'priceOneHour * 5', 'Tageskarte', 480),
('A', 22, 1, TRUE, 'n', 100, 'price / 2', 'HolliKnolli', NULL),
('A', 23, 1, FALSE, 'o', 101, 'price / 3', 'Sommerferien', NULL);
CREATE CACHED TABLE PUBLIC.PROMOTION_RENTAL(
    PROMOTION_ID BIGINT NOT NULL,
    RENTALS_ID BIGINT NOT NULL
);               
ALTER TABLE PUBLIC.PROMOTION_RENTAL ADD CONSTRAINT PUBLIC.CONSTRAINT_3 PRIMARY KEY(PROMOTION_ID, RENTALS_ID);  
-- 1 +/- SELECT COUNT(*) FROM PUBLIC.PROMOTION_RENTAL;         
INSERT INTO PUBLIC.PROMOTION_RENTAL(PROMOTION_ID, RENTALS_ID) VALUES
(8, 7);   
CREATE CACHED TABLE PUBLIC.RENTAL(
    ID BIGINT NOT NULL CHECK (ID >= 0),
    VERSION INTEGER NOT NULL CHECK (VERSION >= 0),
    ARRIVAL TIMESTAMP,
    COUPON BOOLEAN,
    DAY DATE NOT NULL,
    DAYID INTEGER NOT NULL CHECK (DAYID >= 0),
    DELETED BOOLEAN,
    DEPARTURE TIMESTAMP NOT NULL,
    FINISHED BOOLEAN,
    PAYMENTMETHOD VARCHAR(255),
    PRICECALCULATEDAFTER DECIMAL(19, 2) CHECK (PRICECALCULATEDAFTER >= 0),
    PRICECALCULATEDBEFORE DECIMAL(19, 2) CHECK (PRICECALCULATEDBEFORE >= 0),
    PRICEPAIDAFTER DECIMAL(19, 2) CHECK (PRICEPAIDAFTER >= 0),
    PRICEPAIDBEFORE DECIMAL(19, 2) CHECK (PRICEPAIDBEFORE >= 0),
    BOAT_ID BIGINT NOT NULL,
    PROMOTION_ID BIGINT
);    
ALTER TABLE PUBLIC.RENTAL ADD CONSTRAINT PUBLIC.CONSTRAINT_8 PRIMARY KEY(ID);  
-- 11 +/- SELECT COUNT(*) FROM PUBLIC.RENTAL;  
INSERT INTO PUBLIC.RENTAL(ID, VERSION, ARRIVAL, COUPON, DAY, DAYID, DELETED, DEPARTURE, FINISHED, PAYMENTMETHOD, PRICECALCULATEDAFTER, PRICECALCULATEDBEFORE, PRICEPAIDAFTER, PRICEPAIDBEFORE, BOAT_ID, PROMOTION_ID) VALUES
(2, 1, TIMESTAMP '2015-07-31 13:00:00.0', FALSE, DATE '2015-07-31', 6, FALSE, TIMESTAMP '2015-07-31 12:00:00.0', TRUE, 'CASH', 20.00, NULL, 20.00, NULL, 1, NULL),
(3, 1, NULL, FALSE, DATE '2015-07-01', 3, FALSE, TIMESTAMP '2015-07-01 12:15:00.0', FALSE, NULL, NULL, NULL, NULL, NULL, 1, NULL),
(5, 1, NULL, FALSE, DATE '2015-07-01', 2, TRUE, TIMESTAMP '2015-07-01 12:14:00.0', FALSE, NULL, NULL, NULL, NULL, NULL, 6, NULL),
(7, 1, TIMESTAMP '2015-07-01 14:10:00.0', FALSE, DATE '2015-07-01', 1, FALSE, TIMESTAMP '2015-07-01 12:00:00.0', TRUE, 'CARD', 1.60, 32.00, 1.60, 32.00, 1, 8),
(10, 1, TIMESTAMP '2015-07-01 13:37:00.0', FALSE, DATE '2015-07-01', 5, FALSE, TIMESTAMP '2015-07-01 12:30:00.0', TRUE, 'CASH', 12.60, NULL, 12.60, NULL, 11, NULL),
(12, 1, TIMESTAMP '2015-06-01 13:00:00.0', FALSE, DATE '2015-06-01', 6, FALSE, TIMESTAMP '2015-06-01 12:00:00.0', TRUE, 'CASH', 20.00, NULL, 20.00, NULL, 1, NULL),
(13, 1, TIMESTAMP '2015-07-31 14:00:00.0', FALSE, DATE '2015-07-31', 6, FALSE, TIMESTAMP '2015-07-31 13:00:00.0', TRUE, 'CASH', 20.00, NULL, 20.00, NULL, 1, NULL),
(14, 1, TIMESTAMP '2014-07-01 13:00:00.0', FALSE, DATE '2014-07-01', 6, FALSE, TIMESTAMP '2014-07-01 12:00:00.0', TRUE, 'CASH', 20.00, NULL, 20.00, NULL, 1, NULL),
(15, 1, TIMESTAMP '2015-06-01 14:00:00.0', FALSE, DATE '2015-06-01', 6, FALSE, TIMESTAMP '2015-06-01 13:00:00.0', TRUE, 'CASH', 20.00, NULL, 20.00, NULL, 1, NULL),
(16, 1, TIMESTAMP '2014-07-02 13:00:00.0', FALSE, DATE '2014-07-02', 6, FALSE, TIMESTAMP '2014-07-02 12:00:00.0', TRUE, 'CASH', 20.00, NULL, 20.00, NULL, 1, NULL),
(28, 1, NULL, FALSE, DATE '2015-07-01', 4, FALSE, TIMESTAMP '2015-07-01 12:20:00.0', FALSE, NULL, NULL, NULL, NULL, NULL, 6, NULL);              
ALTER TABLE PUBLIC.PROMOTION_RENTAL ADD CONSTRAINT PUBLIC.UK_FGBTJXUDO0BKIONTT5YS0XFM8 UNIQUE(RENTALS_ID);     
ALTER TABLE PUBLIC.BOAT_RENTAL ADD CONSTRAINT PUBLIC.UK_B7BW0M2HPY47IW04W3PI0U150 UNIQUE(RENTALS_ID);          
ALTER TABLE PUBLIC.PROMOTION_RENTAL ADD CONSTRAINT PUBLIC.FK_44GPGKHDCL30HIX5624MP8GKC FOREIGN KEY(PROMOTION_ID) REFERENCES PUBLIC.PROMOTION(ID) NOCHECK;      
ALTER TABLE PUBLIC.RENTAL_COMMITMENT ADD CONSTRAINT PUBLIC.FK_5LPYMTNESOQMJQI3XW03CUU87 FOREIGN KEY(RENTAL_ID) REFERENCES PUBLIC.RENTAL(ID) NOCHECK;           
ALTER TABLE PUBLIC.BOAT_RENTAL ADD CONSTRAINT PUBLIC.FK_B7BW0M2HPY47IW04W3PI0U150 FOREIGN KEY(RENTALS_ID) REFERENCES PUBLIC.RENTAL(ID) NOCHECK;
ALTER TABLE PUBLIC.RENTAL_COMMITMENT ADD CONSTRAINT PUBLIC.FK_7K6QE75FKH5GD9OUGR54QMEFE FOREIGN KEY(COMMITMENT_ID) REFERENCES PUBLIC.COMMITMENT(ID) NOCHECK;   
ALTER TABLE PUBLIC.BOAT_RENTAL ADD CONSTRAINT PUBLIC.FK_K22U0LBUKBGQN66HI0TO516N1 FOREIGN KEY(BOAT_ID) REFERENCES PUBLIC.BOAT(ID) NOCHECK;     
ALTER TABLE PUBLIC.PROMOTION_RENTAL ADD CONSTRAINT PUBLIC.FK_FGBTJXUDO0BKIONTT5YS0XFM8 FOREIGN KEY(RENTALS_ID) REFERENCES PUBLIC.RENTAL(ID) NOCHECK;           
ALTER TABLE PUBLIC.RENTAL ADD CONSTRAINT PUBLIC.FK_6YCSYRLTFKYV93GMEEONH6Q7J FOREIGN KEY(BOAT_ID) REFERENCES PUBLIC.BOAT(ID) NOCHECK;          
ALTER TABLE PUBLIC.RENTAL ADD CONSTRAINT PUBLIC.FK_G2NSO0DCVEDALP443R4YHDO1 FOREIGN KEY(PROMOTION_ID) REFERENCES PUBLIC.PROMOTION(ID) NOCHECK; 
